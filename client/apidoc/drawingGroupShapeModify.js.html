<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: drawing/drawingGroupShapeModify.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: drawing/drawingGroupShapeModify.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview A class representing a canvas group where shapes
 * can be modified.
 */

goog.provide('xrx.drawing.GroupShapeModify');



goog.require('goog.dom.DomHelper');
goog.require('xrx.drawing.Group');
goog.require('xrx.drawing.GroupBackground');
goog.require('xrx.drawing.GroupHandler');
goog.require('xrx.graphics.Graphics');



/**
 * A class representing a canvas group where shapes can be modified.
 * @param {xrx.drawing.Canvas} canvas A canvas object.
 * @constructor
 * @extends xrx.drawing.Group
 */
xrx.drawing.GroupShapeModify = function(canvas) {

  goog.base(this, canvas);
};
goog.inherits(xrx.drawing.GroupShapeModify, xrx.drawing.Group);



/**
 * Returns all vertex dragging elements attached to the currently selected shape.
 * @return {Array.&lt;DOMElement>} The vertex dragging elements.
 */
xrx.drawing.GroupShapeModify.prototype.getVertexDraggers = function() {
  var self = this;
  return goog.dom.getChildren(self.getShapeWrapper());
};



/**
 * Returns the coordinates of all vertex dragging elements attached to the currently
 * selected shape.
 * @param {?} opt_vertexDraggers For performance overload the vertex dragging elements
 * if already known.
 * @return {Array.&lt;Array.&lt;number>>} The coordinates.
 */
xrx.drawing.GroupShapeModify.prototype.getVertexDraggerCoords = function(opt_vertexDraggers) {
  var graphics = this.getCanvas().getGraphics();
  var vertexDraggers = opt_vertexDraggers || this.getVertexDraggers();
  var length = vertexDraggers.length;
  var coords = new Array(length);
  var coordNew;
  var coordVertex;

  for(var i = 0; i &lt; length; i++) {
    coordNew = new Array(2);
    coordVertex = graphics.VertexDragger.getCoords(vertexDraggers[i]);
    coordNew[0] = coordVertex[0][0];
    coordNew[1] = coordVertex[0][1];
    coords[i] = coordNew;
  }

  return coords;
};



/**
 * Returns the position of the vertex dragging element currently used for dragging.
 * @param {DOMElement} element The vertex dragging element to test.
 * @param {?} opt_vertexDraggers For performance overload the vertex dragging elements
 * if already known.
 * @return {number} The position.
 */
xrx.drawing.GroupShapeModify.prototype.getVertexDraggerPosition = function(element, opt_vertexDraggers) {
  var pos;
  var vertexDraggers = opt_vertexDraggers || this.getVertexDraggers();

  for(var i = 0; i &lt; vertexDraggers.length; i++) {
    pos = i;
    if (vertexDraggers[i] === element) break;
  }

  return pos;
};



/**
 * Add vertex dragging elements for shape modification.
 * @param {DOMElement} modifiable A group element containing vertex dragging elements.
 */
xrx.drawing.GroupShapeModify.prototype.activate = function(modifiable) {
  var self = this;
  goog.dom.replaceNode(modifiable, self.getShapeWrapper());
  this.shapeWrapper_ = modifiable;
};



/**
 * Updates the coordinates of the vertex dragging element currently selected.
 * @param {Array.&lt;Array.&lt;number>>} coords The coordinates.
 * @param {number} position The position of the vertex dragging element which
 * shall not be updated.
 */
xrx.drawing.GroupShapeModify.prototype.update = function(coords, position) {
  var graphics = this.getCanvas().getGraphics();
  var vertexDraggers = this.getVertexDraggers();

  for(var d = 0, len = vertexDraggers.length; d &lt; len; d++) {
    if (d != position) graphics.VertexDragger.setCoords(vertexDraggers[d], [coords[d]]);
  }
};



/**
 * @private
 */
xrx.drawing.GroupShapeModify.prototype.registerEvents_ = function() {
  var graphics = this.getCanvas().getGraphics();
  this.registerMouseZoom(this.element_, xrx.drawing.GroupHandler);
  this.registerMouseDrag(this.element_, graphics.VertexDragger);
  this.registerMouseRotate(this.element_, xrx.drawing.GroupHandler);
};

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="xrx.drawing.html">drawing</a></li><li><a href="xrx.drawing.Canvas.html">Canvas</a></li><li><a href="xrx.drawing.Group.html">Group</a></li><li><a href="xrx.drawing.GroupBackground.html">GroupBackground</a></li><li><a href="xrx.drawing.GroupShape.html">GroupShape</a></li><li><a href="xrx.drawing.GroupShapeCreate.html">GroupShapeCreate</a></li><li><a href="xrx.drawing.GroupShapeModify.html">GroupShapeModify</a></li><li><a href="xrx.drawing.Shield.html">Shield</a></li><li><a href="xrx.drawing.Toolbar.html">Toolbar</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a> on Thu Jun 19 2014 16:53:37 GMT+0200 (MESZ)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
