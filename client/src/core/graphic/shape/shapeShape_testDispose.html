<!DOCTYPE html>
<html>
<head>
<title>Test Dispose of Shape Objects</title>
<script src="../../../../lib/closure-library/closure/goog/base.js"></script>
<script src="../../../deps.js"></script>
<script>
goog.require('goog.dom.DomHelper');
goog.require('xrx.graphic');
</script>
<script>



function run1TestDispose() {
  var element = goog.dom.createElement('div');
  var drawing = new xrx.drawing.Drawing(element);
  this.circle = new xrx.shape.Circle(drawing);
  circle.getCreatable();
  circle.getHoverable();
  circle.getModifiable();
  circle.getSelectable();
  drawing.addShapes(circle);
  // dispose shapes
  this.circle.dispose();
  goog.dom.removeNode(element);
  element = null;
};



function runTestDispose() {
  for (var i = 0; i < 10; i++) {
    run1TestDispose();
  }
};



</script>
</head>
<body onloads="runTestDispose();">
  <h1>Test Dispose of Shape Object</h1>
  <p>Use Google Chrome <em>Developer Tools &gt; Profiles &gt; Record Heap Allocations</em>.</p>
  <p>Use <em>Class Filter</em> 'xrx'</p>
  <p>Test succeeds if for each xrx.shape.Shape object <em>Shallow Size</em> is equal to <em>Retained Size</em>.</p>
  <button onclick="runTestDispose();">Test Dispose of Shape Objects</button>
</body>
</html>